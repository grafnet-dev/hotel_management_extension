<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Vue Liste des Chambres -->
    <!-- view_form_hotel_room_inherit_extension-->
    <!-- Vue Liste des Chambres - H√©ritage et Remplacement -->
    <record id="view_list_hotel_room_inherit_extension" model="ir.ui.view">
        <field name="name">hotel.room.view.list.inherit.extension</field>
        <field name="model">hotel.room</field>
        <field name="inherit_id" ref="hotel_management_odoo.hotel_room_view_tree" />
        <field name="arch" type="xml">
            <!-- Masquer les champs du module principal -->
            <field name="name" position="replace">
                <field name="name" string="Num√©ro de Chambre"/>
            </field>
            
            <field name="room_type" position="replace">
                <field name="room_type_id" string="Type de Chambre"/>
            </field>
            
            <field name="floor_id" position="replace">
                <field name="floor_id" string="√âtage"/>
            </field>
            
           
            
            <field name="status" position="replace">
                <field name="status" string="Statut"/>
                <field name="available_count" string="Total Disponibilit√©s"/>
            </field>
            
            <!-- Optionnel: Ajouter des d√©corations pour le statut--> 
            <list position="attributes">
                <attribute name="decoration-success">status == 'available'</attribute>
                <attribute name="decoration-danger">status == 'occupied'</attribute>
                <attribute name="decoration-warning">status == 'cleaning'</attribute>
                <attribute name="decoration-muted">status == 'maintenance'</attribute>
            </list>
        </field>
    </record>


    <!-- Vue Kanban des Chambres -->
    <record id="hotel_room_view_kanban" model="ir.ui.view">
        <field name="name">hotel.room.kanban</field>
        <field name="model">hotel.room</field>
        <field name="arch" type="xml">
            <kanban default_group_by="room_type_id">
                <field name="name"/>
                <field name="room_type_id"/>
                <field name="status"/>
                <field name="available_count"/>
                <field name="is_in_maintenance"/>
                <templates>
                    <t t-name="card">
                        <div class="oe_kanban_global_click">
                            <div class="oe_kanban_content">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <field name="name"/>
                                        </strong>
                                    </div>
                                    <div class="o_kanban_record_badge">
                                        <span t-if="record.status.raw_value == 'available'" class="badge badge-success">
                                            <i class="fa fa-check" title="Disponible"/> Disponible
                                        </span>
                                        <span t-if="record.status.raw_value == 'occupied'" class="badge badge-danger">
                                            <i class="fa fa-user" title="Occup√©e"/> Occup√©e
                                        </span>
                                        <span t-if="record.status.raw_value == 'cleaning'" class="badge badge-warning">
                                            <i class="fa fa-cleaning" title="Nettoyage"/> Nettoyage
                                        </span>
                                        <span t-if="record.status.raw_value == 'maintenance'" class="badge badge-secondary">
                                            <i class="fa fa-wrench" title="Maintenance"/> Maintenance
                                        </span>
                                    </div>
                                </div>
                                <div class="o_kanban_record_body">
                                    <div>Type: <field name="room_type_id"/></div>
                                    <div t-if="record.available_count.raw_value > 0">
                                        <i class="fa fa-home" title="Disponibles"/> <field name="available_count"/> disponibles
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Vue Formulaire des Chambres -->
    <record id="hotel_room_view_form" model="ir.ui.view">
        <field name="name">hotel.room.form</field>
        <field name="model">hotel.room</field>
        <field name="arch" type="xml">
            <form string="Chambre">
                <header>
                    <button name="action_set_available" string="Disponible" type="object" 
                            class="btn-success" invisible="status == 'available'"/>
                    <button name="action_set_occupied" string="Occup√©e" type="object" 
                            class="btn-danger" invisible="status == 'occupied'"/>
                    <button name="action_set_cleaning" string="Nettoyage" type="object" 
                            class="btn-warning" invisible="status == 'cleaning'"/>
                    <button name="action_set_maintenance" string="Maintenance" type="object" 
                            class="btn-secondary" invisible="status == 'maintenance'"/>
                    <field name="status" widget="statusbar" statusbar_visible="available,occupied,cleaning,maintenance"/>
                </header>
                
                <xpath expr="//notebook" position="inside">
                
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Num√©ro de chambre"/>
                        </h1>
                    </div>
                    
                    <!-- Alerte si pas de type de chambre 
                    <div class="alert alert-warning" role="alert" invisible="room_type_id">
                        <strong>‚ö†Ô∏è Attention :</strong> Vous devez d'abord cr√©er un type de chambre avant d'enregistrer cette chambre.
                        <br/>
                        <a href="/web#action=hotel_management_odoo.hotel_room_type_action&amp;view_type=form" target="_blank">
                            ‚Üí Cr√©er un type de chambre
                        </a>
                    </div>-->

                    <group>
                        <group string="Informations Principales">
                            <field name="room_type_id" 
                                   options="{'no_create': False, 'no_open': False}"
                                   required="1"
                                   readonly="id"/>
                            <field name="floor_id" options="{'no_create': False}" string="√âtage"/>

                            <field name="capacity" string="Capacit√©" readonly="1"/>
                        </group>
                        
                        <group string="Statut et Disponibilit√©">
                            <field name="status" widget="selection"/>
                            <field name="available_count" readonly="1" 
                                   string="Chambres disponibles (m√™me type)"/>
                            <field name="is_in_maintenance"/>
                        </group>
                    </group>
                    
                    <!--<xpath expr="//notebook" position="inside">-->
                    <notebook>
                    
                       

                        <!-- Onglet Types de R√©servation
                        <page string="üìÖ Types de R√©servation" name="reservation_types">
                            <div class="alert alert-info" role="alert">
                                <strong>üí° Information :</strong><br/>
                                ‚Ä¢ Les types de r√©servation sont d√©finis au niveau du type de chambre<br/>
                                ‚Ä¢ Cette chambre h√©rite des types accept√©s par son type
                            </div>
                            <group>
                                <field name="reservation_type_id" invisible="1"/>
                                <button name="action_view_room_type_reservation_types" 
                                        string="G√©rer Types de R√©servation" 
                                        type="object" 
                                        class="btn-primary"
                                        invisible="not room_type_id"/>
                            </group>
                            
                        </page>-->
                        <!-- Onglet Maintenance -->
                     <page string="üõ†Ô∏è Maintenance (Entretien)" name="maintenance">
    <group>
        <group string="√âtat de Maintenance (State of Maintenance)">
            <field name="is_in_maintenance" 
                   readonly="status != 'maintenance'"/>
            <field name="last_maintenance_date" string="Derni√®re date d‚Äôentretien "/>
            <field name="next_maintenance_date" string="Prochaine date d‚Äôentretien "/>
        </group>
        <group string="Notes (Remarks)">
            <field name="maintenance_notes" nolabel="1"/>
        </group>
    </group>
</page>


                        <!-- Onglet Caract√©ristiques 
                        <page string="üõèÔ∏è Caract√©ristiques" name="characteristics">
                            <div class="alert alert-info" role="alert">
                                <strong>üí° Information :</strong><br/>
                                ‚Ä¢ Les caract√©ristiques sont h√©rit√©es du type de chambre<br/>
                                ‚Ä¢ Pour modifier, √©ditez le type de chambre
                            </div>
                            <group>
                               <group string="Caract√©ristiques Physiques" invisible="not room_type_id">
                                    <field name="room_type_id" readonly="1" invisible="1"/>
                                    <field name="bed_type" readonly="1"/>
                                    <field name="surface_area" readonly="1"/>
                                    <field name="max_occupancy" readonly="1"/>
                                </group>
                            </group>
                            <group>
                                <button name="action_view_room_type_details" 
                                        string="Voir D√©tails du Type" 
                                        type="object" 
                                        class="btn-primary"
                                        invisible="not room_type_id"/>
                            </group>
                        </page>-->

                        <!-- Onglet Images 
                        <page string="üì∏ Images" name="images">
                            <div class="alert alert-info" role="alert">
                                <strong>üí° Information :</strong><br/>
                                ‚Ä¢ Les images principales sont g√©r√©es au niveau du type de chambre<br/>
                                ‚Ä¢ Vous pouvez ajouter des images sp√©cifiques √† cette chambre ici
                            </div>
                            <field name="room_image_ids">
                                <list editable="bottom">
                                    <field name="image" widget="image"/>
                                    <field name="description"/>
                                </list>
                            </field>
                        </page>
                        <page string="Types de R√©servation" name="reservation">
                            <group>
                                <group string="Types Accept√©s">
                                    <field name="reservation_type_ids"
                                        widget="many2many_tags"
                                        options="{'no_create_edit': True}" />
                                </group>
                            </group> 
                        </page>-->

                        <!-- Onglet Historique des R√©servations 
                        <page string="üìã Historique" name="history">
                            <field name="booking_line_ids">
                                <list>
                                    <field name="checkin_date"/>
                                    <field name="checkout_date"/>
                                    <field name="state"/>
                                    <field name="guest_name"/>
                                </list>
                            </field>
                        </page>
                        
                        <page string="üìã Historique" name="history">
                            <field name="reservation">
                                
                            </field>
                        </page>-->
                         
                    </notebook>
                    <!--</xpath>-->
                    
                </xpath>
            
               
            </form>
        </field>
    </record>

    <!-- Vue Recherche des Chambres 
    <record id="hotel_room_view_search" model="ir.ui.view">
        <field name="name">hotel.room.search</field>
        <field name="model">hotel.room</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Num√©ro"/>
                <field name="room_type_id" string="Type"/>
                <field name="floor_id" string="√âtage"/>
                <separator/>
                <filter name="available" string="Disponibles" domain="[('status', '=', 'available')]"/>
                <filter name="occupied" string="Occup√©es" domain="[('status', '=', 'occupied')]"/>
                <filter name="maintenance" string="En Maintenance" domain="[('is_in_maintenance', '=', True)]"/>
                <filter name="active" string="Actives" domain="[('active', '=', True)]"/>
                <separator/>
                <group expand="0" string="Grouper par">
                    <filter name="group_by_room_type" string="Type de Chambre" context="{'group_by': 'room_type_id'}"/>
                    <filter name="group_by_status" string="Statut" context="{'group_by': 'status'}"/>
                    <filter name="group_by_floor" string="√âtage" context="{'group_by': 'floor_id'}"/>
                </group>
            </search>
        </field>
    </record>-->

    <!-- Action pour les Chambres
    <record id="hotel_room_action" model="ir.actions.act_window">
        <field name="name">Chambres</field>
        <field name="res_model">hotel.room</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="context">{'search_default_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Cr√©ez votre premi√®re chambre !
            </p>
            <p>
                Avant de cr√©er une chambre, assurez-vous d'avoir cr√©√© au moins un type de chambre.
                <br/>
                <a href="/web#action=hotel_management_odoo.hotel_room_type_action&amp;view_type=form" target="_blank">
                    ‚Üí Cr√©er un type de chambre
                </a>
            </p>
        </field>
    </record>-->

    <!-- Menu 
    <menuitem id="hotel_room_menu" 
              name="Chambres" 
              parent="hotel_management_odoo.hotel_main_menu"
              action="hotel_room_action"
              sequence="20"/>
              -->
</odoo>